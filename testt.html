<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
  <title>Document</title>
</head>
<body>

  <style>
      body {
          background: #642B73;
          /* fallback for old browsers */
          background: -webkit-linear-gradient(to right, #C6426E, #642B73);
          /* Chrome 10-25, Safari 5.1-6 */
          background: linear-gradient(to right, #C6426E, #642B73);
          /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */

      }

      #form {
          background-color: white;
          border-radius: 5px;
          padding: 20px;
          margin-top: 5%;
      }
  </style>
  <div class="row">
      <div id='form' class="col-8 col-md-4  mx-auto">
          <h3 id="form__head" class="mb-4 ">Registration Form</h3>
          <form id="newform" action="#" class="needs-validation" novalidate>


              <div class="form-group p-1">
                  <label for="username"> Username </label>

                  <input type="text" class="form-control" id="username" name="username" required />

                  <div class="invalid-feedback">username can`t username cannot be blank or have space</div>
                  <div class="valid-feedback">Looks Good</div>

              </div>
              <div class="form-group p-1">
                  <label for="email"> Email </label>
                  <input type="email" class="form-control" name="email" id="email" required />
                  <div id="email-validation" class="invalid-feedback">Please Check Mail again.</div>

              </div>
              <div class="form-group p-1">
                  <label for="password"> Password </label>
                  <input type="password" class="form-control" name="password" id="password" required />
                  <div class="invalid-feedback">Please make sure your password contains at least (a
                      Capital
                      letter, a number and a
                      special charcter).</div>


              </div>
              <button type="submit" class=" mt-4 d-block w-100 btn btn-primary">Submit</button>
          </form>
      </div>
  </div>
</body>


<script>
document.querySelector('#email').addEventListener('blur', validateEmail);

document.querySelector('#password').addEventListener('blur', validatePassword);

document.querySelector('#username').addEventListener('blur', validateUsername);

const reSpaces = /^\S*$/;

function validateUsername(e) {
  const username = document.querySelector('#username');
  if (reSpaces.test(username.value)) {
    username.classList.remove('is-invalid');
    username.classList.add('is-valid');
    return true;
  } else {
    username.classList.remove('is-valid');

    username.classList.add('is-invalid');
    return false;
  }
}

function validateEmail(e) {
  const email = document.querySelector('#email');
  const re = /^([a-zA-Z0-9_\-?\.?]){3,}@([a-zA-Z]){3,}\.([a-zA-Z]){2,5}$/;

  if (reSpaces.test(email.value) && re.test(email.value)) {
    email.classList.remove('is-invalid');
    email.classList.add('is-valid');

    return true;
  } else {
    email.classList.add('is-invalid');
    email.classList.remove('is-valid');

    return false;
  }
}

function validatePassword() {
  const password = document.querySelector('#password');
  const re = /(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})(?=.*[!@#$%^&*])/;
  if (re.test(password.value) && reSpaces.test(password.value)) {
    password.classList.remove('is-invalid');
    password.classList.add('is-valid');

    return true;
  } else {
    password.classList.add('is-invalid');
    password.classList.remove('is-valid');

    return false;
  }
}

(function () {
  const forms = document.querySelectorAll('.needs-validation');

  for (let form of forms) {
    form.addEventListener(
      'submit',
      function (event) {
        if (
          !form.checkValidity() ||
          !validateEmail() ||
          !validateUsername() ||
          !validatePassword()
        ) {
          event.preventDefault();
          event.stopPropagation();
        } else {
          form.classList.add('was-validated');
        }
      },
      false
    );
  }
})();
</script>

<!-- <div class="modal fade" id="searchbtn" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="title">搜尋表單</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form method="post">
          <div class="formcnname">
            <div>
              <label>中文姓名</label> <input name="cnname" style="width: 100%" type="text" id="secnname"
                class="form-control">
            </div>
          </div>

          <div class="formenname">
            <div>
              <label>英文姓名</label> <input name="enname" style="width: 100%" type="text" id="seenname"
                class="form-control">
            </div>
          </div>

          <div class="formsex">
            <label>性別</label>
            <div>
              <label><input type="radio" name="sesex" value="man" class="seradio" checked="checked">男</label> <label><input type="radio"
                  name="sesex" value="woman" class="seradio">女</label>
            </div>
          </div>

          <div class="formphone">
            <div>
              <label>手機</label> <input name="phone" style="width: 100%" type="text" id="seenphone"
                class="form-control">
            </div>
          </div>

          <div class="formemail">
            <div>
              <label>電子信箱</label> <input name="email" style="width: 100%" type="text" id="seenemail"
                class="form-control">
            </div>
          </div>

        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">搜尋</button>
        <button type="button" class="btn btn-secondary">重新填寫</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
      </div>
    </div>
  </div>
</div> -->
</html>